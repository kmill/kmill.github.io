<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Four-coloring infinite graphs</title>
    <LINK REL="stylesheet" HREF="../css/style.css" TYPE="text/css">

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages:false,
        messageStyle:"none",
        extensions:["AssistiveMML.js","a11y/accessibility-menu.js"],
        jax:["input/TeX", "output/CommonHTML"],
        TeX:{
          extensions:["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],
          noUndefined:{attributes:{mathcolor:"red",mathbackground:"#FFEEEE",mathsize:"90%"}},
          equationNumbers:{
            autoNumber:"AMS"            
          },
          Macros:{"C": ["\\mathbb{C}", 0], "abs": ["\\lvert #1 \\rvert", 1], "F": ["\\mathbb{F}", 0], "inv": ["^{-1}", 0], "N": ["\\mathbb{N}", 0], "Q": ["\\mathbb{Q}", 0], "R": ["\\mathbb{R}", 0], "im": ["\\operatorname{im}", 0], "Aut": ["\\operatorname{Aut}", 0], "id": ["\\operatorname{id}", 0], "Z": ["\\mathbb{Z}", 0], "gen": ["\\langle #1 \\rangle", 1]}
        },
        "SVG":{
          font:"TeX",
          linebreaks:{automatic:true}
        },
        "CommonHTML":{
        }
      });
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
    <script type="text/javascript">
       window.typesettingCompleted = false;
       MathJax.Hub.Queue(function () {
         //console.log("rendering completed");
         document.querySelectorAll("script").forEach(tag => {
           tag.remove();
         });
         document.querySelectorAll(".MathJax_Preview").forEach(tag => {
           tag.remove();
         });
         document.querySelectorAll(".MathJax_CHTML").forEach(tag => {
           tag.removeAttribute("tabindex");
         });
         window.typesettingCompleted = true;
       });
    </script>
    <style>.MathJax_CHTML:focus { outline: none; }</style>

  </head>
  <body>
    <div class="main">
      <div class="content">
        <h1>Four-coloring infinite graphs</h1>
        
  
  
  <P>The <A HREF="https://en.wikipedia.org/wiki/Four_color_theorem">four-color theorem</A> states that every planar loopless graph can be four colored.  That is, there is an assignment to each vertex of one of four distinct &ldquo;colors&rdquo; such that adjacent vertices are assigned distinct colors.  The case of finite graphs was proved by Appel and Haken in 1976 with computer assistance (with some errors corrected in 1989), and in 2005 Werner and Gonthier formalized a proof of the theorem inside the <A HREF="https://en.wikipedia.org/wiki/Coq">Coq</A> proof assistant.</P>

<CENTER>
    <IMG TITLE=""SRC="250_2020-05-14-Note-16-50_colored.png">
  </CENTER>
<P>A remarkable fact is that the case of infinite graphs follows from the finite case as a matter of pure logic.
  All you need to extend to infinite graphs is the fact that subgraphs of planar graphs are planar!
  This was originally proved by <A HREF="https://en.wikipedia.org/wiki/De_Bruijn%E2%80%93Erd%C5%91s_theorem_(graph_theory)">De Bruijn and Erdős</A> in 1951.</P>

<P>In this post, we&rsquo;ll go through a few ways of organizing the ideas for four coloring infinite graphs.  It should be said that they are all highly non-constructive.  While there might be some comparison to a limiting process, it would be at the level of colorings themselves &mdash; the limit does not descend to the level of the individual edges being colored, since the color assignments to an edge do not necessarily eventually stabilize in any way.</P>

<H2>1. With model theory</H2><P>There is a straightforward way to encode the four coloring problem using first-order logic, and then the infinite case follows immediately from the <A HREF="https://en.wikipedia.org/wiki/Compactness_theorem">Compactness theorem</A>.  But first, we need a few definitions.</P>

<P>A <EM>signature</EM> consists of a collection of abstract sets called <EM>domains</EM> and a collection of abstract relations on these domains of any arity.  By convention, unary relations are known as <EM>predicates</EM>.
  A <EM>theory</EM> for a signature is a collection of first-order sentences, where the quantifiers range over domains.<A NAME="ref_footnote_22_1"></A><sup><A HREF="./blog_2020_05_14_4color.html#footnote_22_1">[1]</A></sup>
  The theory might include sentences that imply certain relations are functions, in such a case we will write <span class='MathJax_Preview'>y=f(x)</span><script type='math/tex'>y=f(x)</script> rather than, say, assert that <span class='MathJax_Preview'>f(x,y)</span><script type='math/tex'>f(x,y)</script> is true.
  A <EM>model</EM> for a theory is an assignment of concrete sets and relations for the signature that satisfy the theory.</P>

<P>The <B>Compactness Theorem</B> states that if every finite subset of a theory has a model, then the whole theory has a model.  The argument here is surprisingly straightforward, which we will sketch because it&rsquo;s kind of cool.  Let <span class='MathJax_Preview'>T</span><script type='math/tex'>T</script> be the theory, and let <span class='MathJax_Preview'>\mathcal{F}T</span><script type='math/tex'>\mathcal{F}T</script> denote the set of all finite subsets of <span class='MathJax_Preview'>T</span><script type='math/tex'>T</script>.  By assumption, each <span class='MathJax_Preview'>I\in\mathcal{F}T</span><script type='math/tex'>I\in\mathcal{F}T</script> has a model <span class='MathJax_Preview'>M_I</span><script type='math/tex'>M_I</script>.  We construct a <A HREF="https://en.wikipedia.org/wiki/Filter_(mathematics)">filter</A> on <span class='MathJax_Preview'>\mathcal{F}T</span><script type='math/tex'>\mathcal{F}T</script> (that is, on the poset <span class='MathJax_Preview'>\mathscr{P}(\mathcal{F}T)</span><script type='math/tex'>\mathscr{P}(\mathcal{F}T)</script> of all subsets of <span class='MathJax_Preview'>\mathcal{F}T</span><script type='math/tex'>\mathcal{F}T</script>) generated by elements of the form
  <div class='MathJax_Preview'><pre>\begin{equation*}
    A_I := \{J\in\mathcal{F}T : I\subseteq J\} \in \mathscr{P}(\mathcal{F}T)
  \end{equation*}</pre></div><script type='math/tex; mode=display'>\begin{equation*}
    A_I := \{J\in\mathcal{F}T : I\subseteq J\} \in \mathscr{P}(\mathcal{F}T)
  \end{equation*}</script>
  for all <span class='MathJax_Preview'>I\in\mathcal{F}T</span><script type='math/tex'>I\in\mathcal{F}T</script>.  These elements satisfy the finite intersection property since <span class='MathJax_Preview'>A_{I}\cap A_{J} = A_{I\cup J}</span><script type='math/tex'>A_{I}\cap A_{J} = A_{I\cup J}</script> for all <span class='MathJax_Preview'>I,J\in\mathcal{F}T</span><script type='math/tex'>I,J\in\mathcal{F}T</script>, so the resulting filter is proper.
  By Zorn&rsquo;s lemma, the filter extends to an ultrafilter <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> on <span class='MathJax_Preview'>\mathcal{F}T</span><script type='math/tex'>\mathcal{F}T</script> (ultrafilters are defined in the next section).
  For <span class='MathJax_Preview'>\phi\in T</span><script type='math/tex'>\phi\in T</script>, we have
  <div class='MathJax_Preview'><pre>\begin{equation*}
    B_\phi := \{I\in\mathcal{F}T : \phi\text{ is true in }M_I\} \supseteq \{I\in\mathcal{F}T : \phi\in I\} \supseteq A_{\{\phi\}}.
  \end{equation*}</pre></div><script type='math/tex; mode=display'>\begin{equation*}
    B_\phi := \{I\in\mathcal{F}T : \phi\text{ is true in }M_I\} \supseteq \{I\in\mathcal{F}T : \phi\in I\} \supseteq A_{\{\phi\}}.
  \end{equation*}</script>
  Since <span class='MathJax_Preview'>A_{\{\phi\}}\in U</span><script type='math/tex'>A_{\{\phi\}}\in U</script>, then <span class='MathJax_Preview'>B_\phi\in U</span><script type='math/tex'>B_\phi\in U</script> as well.  Thus, by <A HREF="https://en.wikipedia.org/wiki/Ultraproduct#%C5%81o%C5%9B's_theorem">Łoś&rsquo;s theorem</A><A NAME="ref_footnote_22_2"></A><sup><A HREF="./blog_2020_05_14_4color.html#footnote_22_2">[2]</A></sup> the ultraproduct <span class='MathJax_Preview'>M=\left(\prod_{I\in \mathcal{F}T} M_I\right)/U</span><script type='math/tex'>M=\left(\prod_{I\in \mathcal{F}T} M_I\right)/U</script> is a model for <span class='MathJax_Preview'>T</span><script type='math/tex'>T</script>.
  (By definition, <span class='MathJax_Preview'>\phi\in T</span><script type='math/tex'>\phi\in T</script> is true in <span class='MathJax_Preview'>M</span><script type='math/tex'>M</script> iff <span class='MathJax_Preview'>B_\phi\in U</span><script type='math/tex'>B_\phi\in U</script>.)</P>

<P>Ok, so how do we apply the compactness theorem?  Let <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> be a loopless planar graph with vertex set <span class='MathJax_Preview'>V(G)</span><script type='math/tex'>V(G)</script>. Define a signature with domains <span class='MathJax_Preview'>V</span><script type='math/tex'>V</script> and <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script> and a function <span class='MathJax_Preview'>f:V\to C</span><script type='math/tex'>f:V\to C</script>.  For each <span class='MathJax_Preview'>v\in V(G)</span><script type='math/tex'>v\in V(G)</script>, throw in constants <span class='MathJax_Preview'>n_v\in V</span><script type='math/tex'>n_v\in V</script> (i.e., nullary functions <span class='MathJax_Preview'>n_v:()\to V</span><script type='math/tex'>n_v:()\to V</script>).  Define a theory <span class='MathJax_Preview'>T</span><script type='math/tex'>T</script> by having, for each edge <span class='MathJax_Preview'>(v,w)\in E(G)</span><script type='math/tex'>(v,w)\in E(G)</script>, the axiom <span class='MathJax_Preview'>f(n_v)\neq f(n_w)</span><script type='math/tex'>f(n_v)\neq f(n_w)</script>, and add in the additional axiom that <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script> has at most four elements.<A NAME="ref_footnote_22_3"></A><sup><A HREF="./blog_2020_05_14_4color.html#footnote_22_3">[3]</A></sup></P>

<P>Each finite subset of <span class='MathJax_Preview'>T</span><script type='math/tex'>T</script> corresponds to some finite subgraph of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script>.  Since finite subgraphs are, by assumption, four-colorable, the finite subset has a corresponding model.  Hence, the compactness theorem says there is a model for <span class='MathJax_Preview'>T</span><script type='math/tex'>T</script> itself.  The domain <span class='MathJax_Preview'>V</span><script type='math/tex'>V</script> in this model might have no relation to <span class='MathJax_Preview'>V(G)</span><script type='math/tex'>V(G)</script> (and in fact the ultraproduct construction will have constructed an absurdly large four-colored graph), but we may use the nullary functions to get a handle on things, since we may color <span class='MathJax_Preview'>v\in V(G)</span><script type='math/tex'>v\in V(G)</script> by the color <span class='MathJax_Preview'>f(n_v)</span><script type='math/tex'>f(n_v)</script>.  Since we had the axiom that <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script> have at most four colors, we are done!</P>

<P><B>Remark.</B> Except for the assertion that <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script> have at most four elements, none of the axioms really involve quantifiers (there are some hidden in the function applications, but by using four mutually exclusive proposition variables per vertex these could be eliminated).  It would suffice to use the compactness theorem for propositional logic rather than the full compactness theorem for first-order logic.</P>

<H2>2. With ultrafilters</H2><P>The compactness theorem is worthwhile to know, but it can be illuminating to expand things out to see how the pieces fit together.  Luxemburg<A NAME="ref_footnote_22_4"></A><sup><A HREF="./blog_2020_05_14_4color.html#footnote_22_4">[4]</A></sup> essentially gave this argument in 1962.</P>

<P>Recall that an <EM>ultrafilter</EM> <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> on the poset <span class='MathJax_Preview'>\mathscr{P}X</span><script type='math/tex'>\mathscr{P}X</script> of subsets of a set <span class='MathJax_Preview'>X</span><script type='math/tex'>X</script> is a subset of <span class='MathJax_Preview'>\mathscr{P}X</span><script type='math/tex'>\mathscr{P}X</script> satisfying the following axioms:
  </P>

<OL>
<LI>If <span class='MathJax_Preview'>A,B\in U</span><script type='math/tex'>A,B\in U</script>, then <span class='MathJax_Preview'>A\cap B\in U</span><script type='math/tex'>A\cap B\in U</script>.
  </LI>
<LI>If <span class='MathJax_Preview'>A\subseteq B\subseteq X</span><script type='math/tex'>A\subseteq B\subseteq X</script> and <span class='MathJax_Preview'>A\in U</span><script type='math/tex'>A\in U</script>, then <span class='MathJax_Preview'>B\in U</span><script type='math/tex'>B\in U</script>.
  </LI>
<LI><span class='MathJax_Preview'>\emptyset\not\in U</span><script type='math/tex'>\emptyset\not\in U</script>.
  </LI>
<LI>If <span class='MathJax_Preview'>A\subseteq X</span><script type='math/tex'>A\subseteq X</script>, then either <span class='MathJax_Preview'>A\in U</span><script type='math/tex'>A\in U</script> or <span class='MathJax_Preview'>X-A\in U</span><script type='math/tex'>X-A\in U</script>.
  </LI>
</OL>

  An ultrafilter is a consistent choice of what are the &ldquo;big&rdquo; subsets of <span class='MathJax_Preview'>X</span><script type='math/tex'>X</script>.  The intersection of big subsets is big, the superset of a big subset is big, the empty set is not big, and every set or its complement is big.  One can check the intersection of a big set and a small set is small.  In other words, there is a homomorphism from <span class='MathJax_Preview'>(\mathscr{P}X,\cup,\cap)</span><script type='math/tex'>(\mathscr{P}X,\cup,\cap)</script> to the boolean lattice <span class='MathJax_Preview'>(\{0,1\},\vee,\wedge)</span><script type='math/tex'>(\{0,1\},\vee,\wedge)</script>.<P>A use of (ultra)filters in topology is generalized limits.  An (ultra)filter <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> on a topological space <span class='MathJax_Preview'>X</span><script type='math/tex'>X</script> is said to converge to a point <span class='MathJax_Preview'>x\in X</span><script type='math/tex'>x\in X</script> if for all open sets <span class='MathJax_Preview'>V\subseteq X</span><script type='math/tex'>V\subseteq X</script> containing <span class='MathJax_Preview'>x</span><script type='math/tex'>x</script> then <span class='MathJax_Preview'>V\in U</span><script type='math/tex'>V\in U</script>.
  The ultrafilter convergence theorem states that (1) <span class='MathJax_Preview'>X</span><script type='math/tex'>X</script> is compact iff every ultrafilter converges to at least one point and (2) <span class='MathJax_Preview'>X</span><script type='math/tex'>X</script> is Hausdorff iff every ultrafilter converges to at most one point.</P>

<P><B>Example.</B> Given an index set <span class='MathJax_Preview'>J</span><script type='math/tex'>J</script>, consider the space <span class='MathJax_Preview'>X=\{0,1\}^J</span><script type='math/tex'>X=\{0,1\}^J</script> with the product topology, which is compact by Tychonoff&rsquo;s compactness theorem.  For every finite subset <span class='MathJax_Preview'>I\subseteq J</span><script type='math/tex'>I\subseteq J</script>, the set
  <div class='MathJax_Preview'><pre>\begin{equation*}
    V_I = \{ x\in X : x_i=1 \text{ for all } i\in I\}
  \end{equation*}</pre></div><script type='math/tex; mode=display'>\begin{equation*}
    V_I = \{ x\in X : x_i=1 \text{ for all } i\in I\}
  \end{equation*}</script>
  is an open.  Furthermore, for every pair of finite subsets <span class='MathJax_Preview'>I_1,I_2\subseteq J</span><script type='math/tex'>I_1,I_2\subseteq J</script>, we have <span class='MathJax_Preview'>V_{I_1}\cap V_{I_2}=V_{I_1\cup I_2}</span><script type='math/tex'>V_{I_1}\cap V_{I_2}=V_{I_1\cup I_2}</script>, so the collection <span class='MathJax_Preview'>\{V_I:I\subseteq J\text{ is a finite subset}\}</span><script type='math/tex'>\{V_I:I\subseteq J\text{ is a finite subset}\}</script> satisfies the finite intersection property.  Collections that do not contain the empty set and that satisfy the finite intersection property extend to an ultrafilter; let <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> be such an ultrafilter on <span class='MathJax_Preview'>\mathscr{P}X</span><script type='math/tex'>\mathscr{P}X</script> extending this collection.  Hence, by the ultrafilter convergence theorem, there is unique point <span class='MathJax_Preview'>x\in X</span><script type='math/tex'>x\in X</script> that <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> converges to since the product of Hausdorff spaces is Hausdorff.  This point is just the all-ones point <span class='MathJax_Preview'>(1)_{i\in J}</span><script type='math/tex'>(1)_{i\in J}</script>.</P>

<P><B>Example.</B> Let <span class='MathJax_Preview'>M</span><script type='math/tex'>M</script> be a manifold and <span class='MathJax_Preview'>C(M)</span><script type='math/tex'>C(M)</script> the <span class='MathJax_Preview'>\mathbb{R}</span><script type='math/tex'>\mathbb{R}</script>-algebra of continuous functions <span class='MathJax_Preview'>M\to\mathbb{R}</span><script type='math/tex'>M\to\mathbb{R}</script>.  If <span class='MathJax_Preview'>\mathfrak{m}\subset C(M)</span><script type='math/tex'>\mathfrak{m}\subset C(M)</script> is a maximal ideal, then consider the collection of sets <span class='MathJax_Preview'>f^{-1}(0)</span><script type='math/tex'>f^{-1}(0)</script> for <span class='MathJax_Preview'>f\in\mathfrak{m}</span><script type='math/tex'>f\in\mathfrak{m}</script>.  Since <span class='MathJax_Preview'>\mathfrak{m}\neq C(M)</span><script type='math/tex'>\mathfrak{m}\neq C(M)</script>, we know none of these is the empty set.  And, for <span class='MathJax_Preview'>f,g\in\mathfrak{m}</span><script type='math/tex'>f,g\in\mathfrak{m}</script>, one can construction a function <span class='MathJax_Preview'>h\in\mathfrak{m}</span><script type='math/tex'>h\in\mathfrak{m}</script> with <span class='MathJax_Preview'>f^{-1}(0)\cap g^{-1}(0)=h^{-1}(0)</span><script type='math/tex'>f^{-1}(0)\cap g^{-1}(0)=h^{-1}(0)</script> since manifolds have bump functions.  Hence, the collection extends to an ultrafilter.  If <span class='MathJax_Preview'>M</span><script type='math/tex'>M</script> is compact, then the ultrafilter has a limit point <span class='MathJax_Preview'>a\in M</span><script type='math/tex'>a\in M</script> and thus <span class='MathJax_Preview'>\mathfrak{m}</span><script type='math/tex'>\mathfrak{m}</script> is principal and generated by the function <span class='MathJax_Preview'>x\mapsto x-a</span><script type='math/tex'>x\mapsto x-a</script>, and hence the quotient map <span class='MathJax_Preview'>C(M)\to C(M)/\mathfrak{m}</span><script type='math/tex'>C(M)\to C(M)/\mathfrak{m}</script> is equivalent to the evaluation map <span class='MathJax_Preview'>f\mapsto f(a)</span><script type='math/tex'>f\mapsto f(a)</script>.</P>

<P>Gottschalk&rsquo;s argument<A NAME="ref_footnote_22_5"></A><sup><A HREF="./blog_2020_05_14_4color.html#footnote_22_5">[5]</A></sup> for colorings of infinite graphs uses compactness.  It is somewhat overkill to use ultrafilters here, but it doesn&rsquo;t hurt to use the language.  Given a loopless graph <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> and a finite set <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script> of colors such that every finite subgraph of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> is <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script>-colorable, let <span class='MathJax_Preview'>X=C^{V(G)}</span><script type='math/tex'>X=C^{V(G)}</script> be the set of all assignments of colors to vertices of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script>, endowed with the product topology.  For each finite subset <span class='MathJax_Preview'>I\subseteq E(G)</span><script type='math/tex'>I\subseteq E(G)</script>, define <span class='MathJax_Preview'>X_I\subseteq X</span><script type='math/tex'>X_I\subseteq X</script> to be the set of all points <span class='MathJax_Preview'>x\in X</span><script type='math/tex'>x\in X</script> such that <span class='MathJax_Preview'>x_v\neq x_w</span><script type='math/tex'>x_v\neq x_w</script> for every edge <span class='MathJax_Preview'>(v,w)\in I</span><script type='math/tex'>(v,w)\in I</script>.  These are open subsets, and the collection of all of them satisfies the finite intersection property.  Since finite subgraphs of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> are all <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script>-colorable, then none of the <span class='MathJax_Preview'>X_I</span><script type='math/tex'>X_I</script>&rsquo;s are empty, hence there is an ultrafilter containing them.  The ultrafilter convergence theorem implies there is a unique point <span class='MathJax_Preview'>x\in X</span><script type='math/tex'>x\in X</script> that the ultrafilter converges to, and one can check it is a proper <span class='MathJax_Preview'>C</span><script type='math/tex'>C</script>-coloring of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script>.  (Without ultrafilters, one may use the fact that these <span class='MathJax_Preview'>X_I</span><script type='math/tex'>X_I</script> sets are closed and have the finite intersection property, hence their intersection is nonempty.)</P>

<P>For the rest of this section, we&rsquo;ll go for a direct proof that sort of combines Gottschalk&rsquo;s approach and ultraproducts and expands out the definitions.</P>

<P>Let <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> be a loopless planar graph, and let <span class='MathJax_Preview'>\mathcal{F}G</span><script type='math/tex'>\mathcal{F}G</script> denote the set of all spanning subgraphs <span class='MathJax_Preview'>H\subseteq G</span><script type='math/tex'>H\subseteq G</script> with finitely many edges (that is, <span class='MathJax_Preview'>V(H)=V(G)</span><script type='math/tex'>V(H)=V(G)</script> and <span class='MathJax_Preview'>E(H)</span><script type='math/tex'>E(H)</script> is finite).  By assumption, each <span class='MathJax_Preview'>H\in \mathcal{F}G</span><script type='math/tex'>H\in \mathcal{F}G</script> has a proper four coloring, hence there is a function <span class='MathJax_Preview'>f_H:V(G) \to 4</span><script type='math/tex'>f_H:V(G) \to 4</script> such that <span class='MathJax_Preview'>f_H(v)\neq f_H(w)</span><script type='math/tex'>f_H(v)\neq f_H(w)</script> for every edge <span class='MathJax_Preview'>(v,w)\in E(H)</span><script type='math/tex'>(v,w)\in E(H)</script>.  Consider the collection of sets of the form <span class='MathJax_Preview'>A_H=\{H'\in \mathcal{F}G: H\subseteq H'\}</span><script type='math/tex'>A_H=\{H'\in \mathcal{F}G: H\subseteq H'\}</script>.  This collection satisfies the finite intersection property since <span class='MathJax_Preview'>A_{H}\cap A_{H'} = A_{H\cup H'}</span><script type='math/tex'>A_{H}\cap A_{H'} = A_{H\cup H'}</script> for each pair <span class='MathJax_Preview'>H,H'\in \mathcal{F}G</span><script type='math/tex'>H,H'\in \mathcal{F}G</script>.  Since each <span class='MathJax_Preview'>A_H</span><script type='math/tex'>A_H</script> is nonempty, this collection extends to an ultrafilter <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> on <span class='MathJax_Preview'>\mathscr{P}(\mathcal{F}G)</span><script type='math/tex'>\mathscr{P}(\mathcal{F}G)</script>.  Now we use the ultrafilter to &ldquo;vote&rdquo; on the coloring of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> itself in the following way.</P>

<P>For <span class='MathJax_Preview'>v\in V(G)</span><script type='math/tex'>v\in V(G)</script>, consider the function <span class='MathJax_Preview'>F_v: \mathcal{F}G\to 4</span><script type='math/tex'>F_v: \mathcal{F}G\to 4</script> defined by <span class='MathJax_Preview'>F_v(H) = f_H(v)</span><script type='math/tex'>F_v(H) = f_H(v)</script>, and let <span class='MathJax_Preview'>C(v)</span><script type='math/tex'>C(v)</script> denote the set of colors <span class='MathJax_Preview'>c\in 4</span><script type='math/tex'>c\in 4</script> such that <span class='MathJax_Preview'>F_v^{-1}(c)\in U</span><script type='math/tex'>F_v^{-1}(c)\in U</script>.  That is, <span class='MathJax_Preview'>C(v)</span><script type='math/tex'>C(v)</script> is the set of colors for which a &ldquo;majority&rdquo; of the spanning subgraphs chose that color for that vertex.  A first fact is that <span class='MathJax_Preview'>C(v)</span><script type='math/tex'>C(v)</script> is nonempty.  If it were empty, then for each <span class='MathJax_Preview'>c\in 4</span><script type='math/tex'>c\in 4</script> we would have <span class='MathJax_Preview'>\mathcal{F}G-F_v^{-1}(c)\in U</span><script type='math/tex'>\mathcal{F}G-F_v^{-1}(c)\in U</script>, and hence the intersection of all these complements would be in <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script>.  But
  <div class='MathJax_Preview'><pre>\begin{equation*}
    \bigcap_{i\in 4} \left(\mathcal{F}G-F_v^{-1}(i)\right) = \{H\in \mathcal{F}G : f_H(v) \not\in 4\} = \emptyset,
  \end{equation*}</pre></div><script type='math/tex; mode=display'>\begin{equation*}
    \bigcap_{i\in 4} \left(\mathcal{F}G-F_v^{-1}(i)\right) = \{H\in \mathcal{F}G : f_H(v) \not\in 4\} = \emptyset,
  \end{equation*}</script>
  and <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> does not contain the empty set!  A second fact is that <span class='MathJax_Preview'>C(v)</span><script type='math/tex'>C(v)</script> has at most one element.  For <span class='MathJax_Preview'>c,c'\in C(v)</span><script type='math/tex'>c,c'\in C(v)</script>, then we have <span class='MathJax_Preview'>F_v^{-1}(c)\cap F_v^{-1}(c')\in U</span><script type='math/tex'>F_v^{-1}(c)\cap F_v^{-1}(c')\in U</script>.  This intersection consists of all those graphs <span class='MathJax_Preview'>H\in \mathcal{F}G</span><script type='math/tex'>H\in \mathcal{F}G</script> such that <span class='MathJax_Preview'>f_H(v)=c</span><script type='math/tex'>f_H(v)=c</script> and <span class='MathJax_Preview'>f_H(v)=c'</span><script type='math/tex'>f_H(v)=c'</script>, hence <span class='MathJax_Preview'>c=c'</span><script type='math/tex'>c=c'</script> since the intersection is nonempty.
  Therefore, <span class='MathJax_Preview'>\lvert C(v)\rvert=1</span><script type='math/tex'>\lvert C(v)\rvert=1</script> for each <span class='MathJax_Preview'>v\in V(G)</span><script type='math/tex'>v\in V(G)</script>.  Define <span class='MathJax_Preview'>f: V(G)\to 4</span><script type='math/tex'>f: V(G)\to 4</script> by letting <span class='MathJax_Preview'>f(v)</span><script type='math/tex'>f(v)</script> be the sole element of <span class='MathJax_Preview'>C(v)</span><script type='math/tex'>C(v)</script> for each <span class='MathJax_Preview'>v</span><script type='math/tex'>v</script>, which is to say <span class='MathJax_Preview'>f</span><script type='math/tex'>f</script> is defined by the relation <span class='MathJax_Preview'>F_v^{-1}(f(v))\in U</span><script type='math/tex'>F_v^{-1}(f(v))\in U</script> for each <span class='MathJax_Preview'>v\in V(G)</span><script type='math/tex'>v\in V(G)</script>.</P>

<P>What is left is to show that <span class='MathJax_Preview'>f</span><script type='math/tex'>f</script> defines a proper coloring.<A NAME="ref_footnote_22_6"></A><sup><A HREF="./blog_2020_05_14_4color.html#footnote_22_6">[6]</A></sup>  Let <span class='MathJax_Preview'>(v,w)\in E(G)</span><script type='math/tex'>(v,w)\in E(G)</script> be an edge, and suppose it were the case that <span class='MathJax_Preview'>c=f(v)=f(w)</span><script type='math/tex'>c=f(v)=f(w)</script>.  Let <span class='MathJax_Preview'>H\in \mathcal{F}G</span><script type='math/tex'>H\in \mathcal{F}G</script> be the graph with <span class='MathJax_Preview'>E(H)=\{(v,w)\}</span><script type='math/tex'>E(H)=\{(v,w)\}</script>.  Consider the intersection
  <div class='MathJax_Preview'><pre>\begin{equation*}
    A_H \cap F_v^{-1}(f(v)) \cap F_w^{-1}(f(w)) = \{H'\in \mathcal{F}G : (v,w)\in E(H')\text{ and } f_{H'}(v) = f_{H'}(w)\}.
  \end{equation*}</pre></div><script type='math/tex; mode=display'>\begin{equation*}
    A_H \cap F_v^{-1}(f(v)) \cap F_w^{-1}(f(w)) = \{H'\in \mathcal{F}G : (v,w)\in E(H')\text{ and } f_{H'}(v) = f_{H'}(w)\}.
  \end{equation*}</script>
  Since each <span class='MathJax_Preview'>f_{H'}</span><script type='math/tex'>f_{H'}</script> is a proper coloring, this set is empty.
  But, this is an intersection of three elements of <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script>, so it would be an element of <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> as well!
  Therefore <span class='MathJax_Preview'>f</span><script type='math/tex'>f</script> must be a proper coloring, and we are done.</P>

<P><B>Remark.</B> Define <span class='MathJax_Preview'>F:\mathcal{F}G\to 4^{V(G)}</span><script type='math/tex'>F:\mathcal{F}G\to 4^{V(G)}</script> by <span class='MathJax_Preview'>f(H)=f_H</span><script type='math/tex'>f(H)=f_H</script>.  Maps of sets carry ultrafilters to ultrafilters, which in particular means that <span class='MathJax_Preview'>F_*U=\{A\subseteq 4^{V(G)}:F^{-1}(A)\in U\}</span><script type='math/tex'>F_*U=\{A\subseteq 4^{V(G)}:F^{-1}(A)\in U\}</script> is an ultrafilter on <span class='MathJax_Preview'>4^{V(G)}</span><script type='math/tex'>4^{V(G)}</script>.  Since <span class='MathJax_Preview'>4^{V(G)}</span><script type='math/tex'>4^{V(G)}</script> is compact Hausdorff, there is a unique <EM><span class='MathJax_Preview'>U</span><script type='math/tex'>U</script>-limit</EM> of <span class='MathJax_Preview'>F</span><script type='math/tex'>F</script> (that is, a limit point of <span class='MathJax_Preview'>F_*U</span><script type='math/tex'>F_*U</script>), and it was the <span class='MathJax_Preview'>f</span><script type='math/tex'>f</script> we constructed from before.  With <span class='MathJax_Preview'>\mathscr{P}G</span><script type='math/tex'>\mathscr{P}G</script> denoting the set of all spanning subgraphs of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script>, then we may endow it with the product topology using the correspondence that a spanning subgraph is a function <span class='MathJax_Preview'>E(G)\to 2</span><script type='math/tex'>E(G)\to 2</script>.  The subspace <span class='MathJax_Preview'>\mathcal{F}G\subset\mathscr{P}G</span><script type='math/tex'>\mathcal{F}G\subset\mathscr{P}G</script> is dense, and <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> converges to <span class='MathJax_Preview'>G\in\mathscr{P}G</span><script type='math/tex'>G\in\mathscr{P}G</script>, which is outside <span class='MathJax_Preview'>\mathcal{F}G</span><script type='math/tex'>\mathcal{F}G</script>.  Extending <span class='MathJax_Preview'>U</span><script type='math/tex'>U</script> to be an ultrafilter on <span class='MathJax_Preview'>\mathscr{P}G</span><script type='math/tex'>\mathscr{P}G</script>, it is a principal ultrafilter generated by <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script>, and the limit of a function with respect to a principal ultrafilter is the image of the generator.</P>

<H2>3. By Kőnig&rsquo;s lemma</H2><P>One version of <A HREF="https://en.wikipedia.org/wiki/K%C5%91nig%27s_lemma">Kőnig&rsquo;s lemma</A> is that, given an infinite sequence <span class='MathJax_Preview'>S_1,S_2,S_3,\dots</span><script type='math/tex'>S_1,S_2,S_3,\dots</script> of disjoint non-empty finite sets along with a relation <span class='MathJax_Preview'>&lt;</span><script type='math/tex'><</script> on <span class='MathJax_Preview'>\bigcup_i S_i</span><script type='math/tex'>\bigcup_i S_i</script> such that for every <span class='MathJax_Preview'>x\in S_{n+1}</span><script type='math/tex'>x\in S_{n+1}</script> there is a <span class='MathJax_Preview'>y\in S_n</span><script type='math/tex'>y\in S_n</script> with <span class='MathJax_Preview'>y&lt;x</span><script type='math/tex'>y<x</script>, then there exists an infinite sequence <span class='MathJax_Preview'>x_1,x_2,x_3,\dots</span><script type='math/tex'>x_1,x_2,x_3,\dots</script> such that <span class='MathJax_Preview'>x_n\in S_n</span><script type='math/tex'>x_n\in S_n</script> for each <span class='MathJax_Preview'>n</span><script type='math/tex'>n</script> with <span class='MathJax_Preview'>x_1&lt;x_2&lt;x_3&lt;\cdots</span><script type='math/tex'>x_1<x_2<x_3<\cdots</script>.</P>

<CENTER>
    <IMG TITLE=""SRC="450_2020-05-14-Note-16-50_konig.png">
  </CENTER>
<P>For example, given functions <span class='MathJax_Preview'>f_n:S_{n+1}\to S_n</span><script type='math/tex'>f_n:S_{n+1}\to S_n</script> for each <span class='MathJax_Preview'>n</span><script type='math/tex'>n</script>, we could define <span class='MathJax_Preview'>y&lt;x</span><script type='math/tex'>y<x</script> iff <span class='MathJax_Preview'>y=f_n(x)</span><script type='math/tex'>y=f_n(x)</script> for <span class='MathJax_Preview'>y\in S_n</span><script type='math/tex'>y\in S_n</script> and <span class='MathJax_Preview'>x\in S_{n+1}</span><script type='math/tex'>x\in S_{n+1}</script>.  We may interpret Kőnig&rsquo;s lemma as saying the inverse limit <span class='MathJax_Preview'>\varprojlim_n S_n</span><script type='math/tex'>\varprojlim_n S_n</script> is nonempty.  Note that this is true even without each <span class='MathJax_Preview'>f_n</span><script type='math/tex'>f_n</script> being surjective.</P>

<P>Nash-Williams<A NAME="ref_footnote_22_7"></A><sup><A HREF="./blog_2020_05_14_4color.html#footnote_22_7">[7]</A></sup> points out how Kőnig&rsquo;s lemma implies a version of infinite graph coloring in the case of a loopless planar graph <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> with a <B>countably infinite</B> vertex set.</P>

<P>Since there are countably many vertices, we may define <span class='MathJax_Preview'>n</span><script type='math/tex'>n</script>-element subsets <span class='MathJax_Preview'>V_n\subset V(G)</span><script type='math/tex'>V_n\subset V(G)</script> with <span class='MathJax_Preview'>V_n\subsetneq V_{n+1}</span><script type='math/tex'>V_n\subsetneq V_{n+1}</script> for each <span class='MathJax_Preview'>n\geq 1</span><script type='math/tex'>n\geq 1</script> such that <span class='MathJax_Preview'>V(G)=\bigcup_n V_n</span><script type='math/tex'>V(G)=\bigcup_n V_n</script>.  Let <span class='MathJax_Preview'>G_n=G[V_n]</span><script type='math/tex'>G_n=G[V_n]</script> be the subgraph of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> that is induced by the vertex set <span class='MathJax_Preview'>V_n</span><script type='math/tex'>V_n</script>; recall this means <span class='MathJax_Preview'>G_n</span><script type='math/tex'>G_n</script> has all the edges of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> that are incident only to vertices from <span class='MathJax_Preview'>V_n</span><script type='math/tex'>V_n</script>.
  Let <span class='MathJax_Preview'>S_n</span><script type='math/tex'>S_n</script> consist of all vertex colorings <span class='MathJax_Preview'>V_n\to 4</span><script type='math/tex'>V_n\to 4</script> that are proper colorings for <span class='MathJax_Preview'>G_n</span><script type='math/tex'>G_n</script>.  Since <span class='MathJax_Preview'>G_n</span><script type='math/tex'>G_n</script> is a planar finite graph, <span class='MathJax_Preview'>S_n</span><script type='math/tex'>S_n</script> is nonempty.</P>

<P>There is a function <span class='MathJax_Preview'>f_n:S_{n+1}\to S_n</span><script type='math/tex'>f_n:S_{n+1}\to S_n</script> defined by restricting the vertex coloring from <span class='MathJax_Preview'>G_{n+1}</span><script type='math/tex'>G_{n+1}</script> to <span class='MathJax_Preview'>G_n</span><script type='math/tex'>G_n</script>.  Hence, by Kőnig&rsquo;s lemma there is a sequence <span class='MathJax_Preview'>x_1,x_2,x_3,\dots</span><script type='math/tex'>x_1,x_2,x_3,\dots</script> with <span class='MathJax_Preview'>x_n\in S_n</span><script type='math/tex'>x_n\in S_n</script> for each <span class='MathJax_Preview'>n</span><script type='math/tex'>n</script> and <span class='MathJax_Preview'>f_n(x_{n+1})=x_n</span><script type='math/tex'>f_n(x_{n+1})=x_n</script>.  For any given vertex <span class='MathJax_Preview'>v\in G</span><script type='math/tex'>v\in G</script>, there is an <span class='MathJax_Preview'>n</span><script type='math/tex'>n</script> with <span class='MathJax_Preview'>v\in V_n</span><script type='math/tex'>v\in V_n</script>.  We may color <span class='MathJax_Preview'>v</span><script type='math/tex'>v</script> according to <span class='MathJax_Preview'>x_n</span><script type='math/tex'>x_n</script>.  We color all of <span class='MathJax_Preview'>G</span><script type='math/tex'>G</script> in this way.</P>

<P>This must be a proper coloring because every pair of adjacent vertices is contained in some <span class='MathJax_Preview'>V_n</span><script type='math/tex'>V_n</script> for a large enough <span class='MathJax_Preview'>n</span><script type='math/tex'>n</script>, and <span class='MathJax_Preview'>V_n</span><script type='math/tex'>V_n</script> contains the edge between them.</P>

<P>The fact the inverse limit is non-empty in no way gives an effective algorithm.  While each extension of the graph might be four-colorable, you might not be able to extend the four coloring itself, and it might change dramatically.  All Kőnig&rsquo;s lemma promises is that, with infinite foresight, you could make the right coloring decisions!</P>

<P><div class="footnotes"><A NAME="footnote_22_1"></A><div class="footnote">
<sup><A HREF="./blog_2020_05_14_4color.html#ref_footnote_22_1">[1]</A></sup> This has been mildly generalized from the usual definition where there are no domains.  You can represent distinct domains in the usual formulation by having mutually exclusive predicates that test domain membership.</div>
<A NAME="footnote_22_2"></A><div class="footnote">
<sup><A HREF="./blog_2020_05_14_4color.html#ref_footnote_22_2">[2]</A></sup> Pronounced &ldquo;Wash&rsquo;s theorem.&rdquo;</div>
<A NAME="footnote_22_3"></A><div class="footnote">
<sup><A HREF="./blog_2020_05_14_4color.html#ref_footnote_22_3">[3]</A></sup> For example, &ldquo;for all <span class='MathJax_Preview'>a,b,c,d,e\in C</span><script type='math/tex'>a,b,c,d,e\in C</script>, then <span class='MathJax_Preview'>a=b</span><script type='math/tex'>a=b</script> or <span class='MathJax_Preview'>a=c</span><script type='math/tex'>a=c</script> or ... or <span class='MathJax_Preview'>d=e</span><script type='math/tex'>d=e</script>.&rdquo;</div>
<A NAME="footnote_22_4"></A><div class="footnote">
<sup><A HREF="./blog_2020_05_14_4color.html#ref_footnote_22_4">[4]</A></sup> Luxemburg, W. A. J. (1962), &ldquo;A remark on a paper by N. G. de Bruijn and P. Erdős&rdquo;, Indagationes Mathematicae, 24: 343–345, doi:10.1016/S1385-7258(62)50033-4, MR 0140435.</div>
<A NAME="footnote_22_5"></A><div class="footnote">
<sup><A HREF="./blog_2020_05_14_4color.html#ref_footnote_22_5">[5]</A></sup> Gottschalk, W. H. (1951), &ldquo;Choice functions and Tychonoff&rsquo;s theorem&rdquo;, Proceedings of the American Mathematical Society, 2 (1): 172, doi:10.2307/2032641, JSTOR 2032641, MR 0040376.</div>
<A NAME="footnote_22_6"></A><div class="footnote">
<sup><A HREF="./blog_2020_05_14_4color.html#ref_footnote_22_6">[6]</A></sup> Thanks to Scott Kovach for debugging this part of the argument.</div>
<A NAME="footnote_22_7"></A><div class="footnote">
<sup><A HREF="./blog_2020_05_14_4color.html#ref_footnote_22_7">[7]</A></sup> Nash-Williams, C. St. J. A. (1967), &ldquo;Infinite graphs&mdash;a survey&rdquo;, Journal of Combinatorial Theory, 3 (3): 286–301, doi:10.1016/s0021-9800(67)80077-2, MR 0214501.</div>
</div></P>


      </div>
      <div class="clear"></div>
      <div class="footer">
        <I>Modified 14 May 2020 by 
      <span CLASS="breadcrumbs">
	<A HREF="../index.html">Kyle Miller</A> > <A HREF="./index.html">Mathblog</A> > Four-coloring infinite graphs
      </span></I>
      </div>
    </div>
  </body>
</html>